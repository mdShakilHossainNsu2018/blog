{% load static %}
{#just for test#}
<!DOCTYPE html>
<html lang="en">
<head>
<title>{% block head_title %}Try Django 1.9{% endblock head_title %}</title>
<!-- Latest compiled and minified CSS -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    {#<link rel='stylesheet' href='{% static "css/bootstrap.min.css" %}' />#}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <style>
{% block style %}{% endblock style %}
    </style>
{% block head_extra %} {% endblock %}
</head>
<body>
{#facebook comment plugins#}
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.3"></script>
{% include "posts/nav_header.html" %}

{% include "posts/messages_display.html" %}

<div class='container'>
{% block content %}{% endblock content %}
</div>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.6.3/marked.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {

        $(".content-markdown").each(function () {
            console.log("hi");
            var content = $(this).text();
        console.log(content);
        var markedContent = marked(content);
        console.log(markedContent);
            $(this).html(markedContent)
        });

        $(".post-detail-item img").each(function () {
            $(this).addClass("img-fluid rounded");
            console.log("add");
        });

        var titleId = $("#id_title");


        var contentInput = $('#id_content');


        function setContent(value) {
            var markedContent = marked(value);
            $("#preview-content").html(markedContent);
            $("#preview-content img").each(function () {
                $(this).addClass("img-fluid rounded");
            })
        }
        {#setContent(contentInput);#}

        contentInput.keyup(function () {
            var newContent = $(this).val();
            setContent(newContent);
        });

        function setTitle(value) {
            $("#preview-title").text(value);
        }
        titleId.keyup(function () {
            var newTitle = $(this).val();
            setTitle(newTitle);
        });

        $(".comment-reply-btn").click(function (event) {

            event.preventDefault();

            $(this).parent().next(".comment-reply").fadeToggle();
        });

    })
</script>
</body>
</html>
